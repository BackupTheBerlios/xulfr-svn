<p>Dans cette section, nous allons voir comment créer des sous-menus et des coches de menus.</p>

<h2>Créer des sous-menus</h2>

<p>Vous pouvez créer des sous-menus à l'intérieur d'autres menus (menus imbriqués) en utilisant
des éléments existants. Souvenez-vous que vous pouvez mettre n'importe quel élément dans un
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menupopup">menupopup</a></code>. Nous avons vu
comment placer des <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menuitem">menuitem</a></code>
et des <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menuseparator">menuseparator</a></code>
dans des <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menupopup">menupopup</a></code>.
Toutefois, vous pouvez créer des sous-menus en plaçant simplement l'élément
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menu">menu</a></code> à l'intérieur de
l'élément <code class="tag">menupopup</code>. Ce fonctionnement est possible du fait que l'élément 
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menu">menu</a></code> est valide 
même quand il n'est pas placé directement dans une barre de menu.</p>

<p>L'exemple ci-dessous crée un simple sous-menu dans le menu Fichier&nbsp;:</p>

<p>Exemple 5.3.1&nbsp;:
<a href="exemples/ex_advmenu_1.xul.txt">Source</a>
<a href="exemples/ex_advmenu_1.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">Voir</a>
</p>

<pre><code>
&lt;toolbox flex="1"&gt;
  &lt;menubar id="sample-menubar"&gt;
    &lt;menu id="file-menu" label="Fichier"&gt;
      &lt;menupopup id="file-popup"&gt;
        &lt;menu id="new-menu" label="Nouveau"&gt;
          &lt;menupopup id="new-popup"&gt;
            &lt;menuitem label="Fenêtre"/&gt;
            &lt;menuitem label="Message"/&gt;
          &lt;/menupopup&gt;
        &lt;/menu&gt;
        &lt;menuitem label="Ouvrir"/&gt;
        &lt;menuitem label="Sauver"/&gt;
        &lt;menuseparator/&gt;
        &lt;menuitem label="Quitter"/&gt;
      &lt;/menupopup&gt;
    &lt;/menu&gt;
  &lt;/menubar&gt;
&lt;/toolbox&gt;
</code></pre>

<p><img src="images/menubar_3.png" alt="Exemple d'un sous-menu" class="screenshot" /></p>

<div class="task">
<h2>Ajouter un menu «&nbsp;Recherche de Fichiers&nbsp;»</h2>

<p>Ajoutons un menu à la boîte de dialogue de recherche de fichiers. Nous allons
juste ajouter quelques commandes simples à un menu <var>Fichier</var> et à un
menu <var>Édition</var>. Ces menus sont similaires à l'exemple ci-dessus.</p>

<pre><code>
&lt;toolbox>
<strong>
 &lt;menubar id="findfiles-menubar">
  &lt;menu id="file-menu" label="Fichier" accesskey="f">
    &lt;menupopup id="file-popup">
      &lt;menuitem label="Ouvrir une Recherche..." accesskey="o"/>
      &lt;menuitem label="Enregistrer une Recherche..." accesskey="s"/>
      &lt;menuseparator/>
      &lt;menuitem label="Fermer" accesskey="f"/>
    &lt;/menupopup>
  &lt;/menu>
  &lt;menu id="edit-menu" label="Édition" accesskey="e">
    &lt;menupopup id="edit-popup">
      &lt;menuitem label="Couper" accesskey="c"/>
      &lt;menuitem label="Copier" accesskey="p"/>
      &lt;menuitem label="Coller" accesskey="l" disabled="true"/>
    &lt;/menupopup>
  &lt;/menu>
 &lt;/menubar>
</strong>
&lt;toolbar id="findfiles-toolbar>
</code></pre>

<p><a href="exemples/findfile/findfile-advmenu.xul.txt">Source</a>
<a href="exemples/findfile/findfile-advmenu.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">Voir</a>
</p>

<p><img alt="La boîte de dialogue de recherche de fichiers avec une barre de menu"
src="images/menubar1.png" class="screenshot" /></p>

<p>Ici, nous avons ajouté deux menus contenant des commandes variées.
Notez que la barre de menus a été ajoutée dans un 
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/toolbox">toolbox</a></code>. Sur l'image, vous
pouvez voir la poignée (grippy) sur la barre de menus qui peut être utilisée pour cacher
la barre de menus. Les points de suspension après <var>Ouvrir une Recherche</var> et
<var>Enregistrer une Recherche</var> sont le moyen habituel pour indiquer à
l'utilisateur qu'une boîte de dialogue va s'ouvrir quand il sélectionne une de ces
commandes. Des touches de raccourcis ont été associées à chaque menu et à chaque item de
menu. Vous verrez dans l'image que cette lettre a été soulignée dans le texte
du menu. Vous verrez aussi que la commande <var>Coller</var> a été désactivée.
Nous supposons qu'il n'y a rien à coller.</p>
</div>

<h2>Ajouter des coches aux menus</h2>

<p>De nombreuses applications ont des items de menu avec des coches.
Par exemple, une fonctionnalité qui est active a une coche placé à côté de la
commande et une fonctionnalité qui est désactivée n'a pas de coche. Quand
l'utilisateur sélectionne le menu, l'état de la coche est inversé. Vous
pouvez aussi créer des boutons radio sur les items de menu.</p>

<p>Les coches sont créées de manière similaire aux éléments
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/checkbox">checkbox</a></code> et
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/radio">radio</a></code>. Elles
impliquent l'utilisation de deux attributs, <code class="attribut">type</code>
pour indiquer le type de coche et <code class="attribut">name</code> pour
regrouper les commandes. L'exemple ci-dessous crée un menu avec un
élément coché.</p>

<p>Exemple 5.3.2&nbsp;:
<a href="exemples/ex_advmenu_2.xul.txt">Source</a>
<a href="exemples/ex_advmenu_2.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">Voir</a>
</p>

<pre><code>
&lt;toolbox&gt;
  &lt;menubar id="options-menubar"&gt;
    &lt;menu id="options_menu" label="Options"&gt;
      &lt;menupopup&gt;
        &lt;menuitem id="backups" label="Faire des sauvegardes" type="checkbox"/&gt;
      &lt;/menupopup&gt;
    &lt;/menu&gt;
  &lt;/menubar&gt;
&lt;/toolbox&gt;
</code></pre>

<p>L'attribut <code class="attribut">type</code> ajouté
est utilisé pour rendre l'élément de menu « cochable ». En mettant sa valeur à
<var>checkbox</var>, l'élément de menu peut être coché et décoché par simple sélection.</p>

<p>En plus des coches standard, vous pouvez créer des coches de
style radio en mettant <code class="attribut">type</code> à la valeur
<var>radio</var>. Une coche radio est utilisée quand vous voulez un groupe
d'éléments de menu dont l'un seulement peut être coché à la fois. Un exemple
peut être un menu de police de caractères où une seule police peut être
sélectionnée. Quand un autre item est sélectionné, l'élément choisi
précédemment est automatiquement décoché.</p>

<p>Pour grouper plusieurs éléments de menu ensemble, vous devez placer un attribut
<code class="attribut">name</code> sur chacun d'eux. Mettez la même chaîne de caractère
pour valeur. L'exemple ci-dessous vous en donne l'illustration&nbsp;:</p>

<p>Exemple 5.3.3&nbsp;:
<a href="exemples/ex_advmenu_3.xul.txt">Source</a>
<a href="exemples/ex_advmenu_3.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">Voir</a>
</p>

<pre><code>
&lt;toolbox&gt;
  &lt;menubar id="planets-menubar"&gt;
    &lt;menu id="planet-menu" label="Planète"&gt;
      &lt;menupopup&gt;
        &lt;menuitem id="jupiter" label="Jupiter" type="radio" name="ringed"/&gt;
        &lt;menuitem id="saturn" label="Saturne" type="radio" name="ringed"/&gt;
        &lt;menuitem id="uranus" label="Uranus" type="radio" name="ringed"/&gt;
        &lt;menuitem id="earth" label="Terre" type="radio" name="inhabited"/&gt;
      &lt;/menupopup&gt;
    &lt;/menu&gt;
  &lt;/menubar&gt;
&lt;/toolbox&gt;
</code></pre>

<p>Si vous essayez cet exemple, vous verrez que sur les trois premiers éléments,
un seul peut être coché à la fois. Ils sont regroupés car ils ont le même
nom. Le dernier élément de menu, <var>Terre</var>, ne fait pas partie du groupe
car il a un nom différent. Pourtant, c'est aussi un bouton radio.</p>

<p>Bien sûr, les éléments de menu groupés doivent tous être dans le même menu. Ils n'ont
pas à être placés les uns à côté des autres, mais les placer autrement n'aurait pas beaucoup de sens.</p>
<hr />

<p>Par la suite, nous allons voir comment créer des menus surgissants.</p>