
<p>Pour les constructeurs de contenu (les gabarits qui n'utilisent pas flags="dont-build-content"), le tri est effectué de manière différente. Au lieu de trier selon une variable générée pendant la génération du gabarit, le tri pour des constructeurs de contenu ne peut être effectué qu'en utilisant un triplet pointant en dehors de la variable membre. Il n'y a pas de connexion entre les variables générées et la ressource utilisée pour le tri, donc cette ressource n'a pas forcément à être utilisée dans le gabarit.</p>

<p>Vous devez spécifier la ressource utilisée pour le tri avec l'attribut <code class="attribut">sortResource</code> sur l'élément racine, comme ceci&nbsp;:</p>

<pre><code>&lt;hbox datasources="template-guide-photos5.rdf"
      sortResource="http://purl.org/dc/elements/1.1/title"
      sortDirection="ascending"
      ref="http://www.xulplanet.com/rdf/myphotos"&gt;

  &lt;template&gt;
    &lt;vbox class="box-padded" uri="rdf:*"&gt;
      &lt;image src="rdf:*"/&gt;
      &lt;label value="rdf:http://purl.org/dc/elements/1.1/title"/&gt;
    &lt;/vbox&gt;
  &lt;/template&gt;

&lt;/hbox&gt;</code></pre>

<p>Dans <a href="exemples/template-guide-ex42.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">cet exemple</a>, les items générés seront triés par leurs titres. L'attribut <code class="attribut">sortDirection</code> précise la direction du tri et peut être défini à <var>descending</var> pour inverser le tri. L'attribut <code class="attribut">sortDirection</code> fonctionne de manière similaire à celui du constructeur d'arbres. Avec un constructeur d'arbres, chaque colonne dispose de son propre tri grâce à l'attribut <code class="attribut">sort</code>, et l'attribut <code class="attribut">sortActive</code> sert à indiquer la colonne actuellement triée. Pour les autres contenus, il n'y a pas de colonnes et un seul tri est applicable, donc l'attribut <code class="attribut">sortActive</code> n'est pas nécessaire.</p>

<p>Lorsque le constructeur de gabarits génère un résultat, le service de tri utilise la valeur du prédicat <code class="attribut">sortResource</code> afin de déterminer à quel endroit le contenu généré pour l'affichage devra être inséré. Lorsque la source de données RDF change, et qu'un nouveau résultat est disponible, le service de tri insère le nouveau contenu au bon emplacement.</p>

<p>Contrairement aux arbres, vous pouvez réaliser un tri en utilisant une ressource secondaire grâce à l'attribut <code class="attribut">sortResource2</code> qui est utilisé de la même manière que l'attribut <code class="attribut">sortResource</code>. Si les valeurs pour le prédicat de <code class="attribut">sortResource</code> sont les mêmes pour deux résultats, le prédicat de <code class="attribut">sortResource2</code> est utilisé pour clarifier le classement. Vous ne pouvez avoir qu'une ressource secondaire, il n'y a pas d'attribut sortResource3.</p>

<p>Pour modifier le tri du contenu généré par un gabarit, vous pouvez soit modifier les attributs relatifs au tri et reconstruire le gabarit, ou pour les boîtes de liste et les menus, vous pouvez appeler la méthode <code>sort</code> du service de tri&nbsp;:</p>

<pre><code>var listbox = document.getElementById("aListBox");
var sortService = Components.classes["@mozilla.org/xul/xul-sort-service;1"].
                    getService(Components.interfaces.nsIXULSortService);
sortService.sort(listbox, "http://purl.org/dc/elements/1.1/title", "descending");</code></pre>

<p>Ce code va trier un élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/listbox">listbox</a></code> par ordre décroissant de titre. Les arguments de la méthode <code>sort</code> sont le noeud racine (la <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/listbox">listbox</a></code>), la ressource pour le tri et la direction du tri.</p>
