
<p>Étudions un exemple plus utile, cette fois pour un gabarit affichant une liste de photos. Dans cette situation, un conteneur RDF sera employé pour contenir la liste des images.</p>

<pre><code>&lt;?xml version="1.0" encoding="iso-8859-1" ?&gt;
&lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;

  &lt;rdf:Seq rdf:about="http://www.xulplanet.com/rdf/myphotos"&gt;
    &lt;rdf:li rdf:resource="http://www.xulplanet.com/ndeakin/images/t/palace.jpg"/&gt;
    &lt;rdf:li rdf:resource="http://www.xulplanet.com/ndeakin/images/t/canal.jpg"/&gt;
    &lt;rdf:li rdf:resource="http://www.xulplanet.com/ndeakin/images/t/obelisk.jpg"/&gt;
  &lt;/rdf:Seq&gt;
  &lt;rdf:Description rdf:about="http://www.xulplanet.com/ndeakin/images/t/palace.jpg"
                   dc:title="Le palais vu de dessus"/&gt;

  &lt;rdf:Description rdf:about="http://www.xulplanet.com/ndeakin/images/t/canal.jpg"
                   dc:title="Canal"/&gt;
  &lt;rdf:Description rdf:about="http://www.xulplanet.com/ndeakin/images/t/obelisk.jpg"
                   dc:title="Obélisque"/&gt;
&lt;/rdf:RDF&gt;</code></pre>

<p>Dans cet exemple, nous avons trois images identifiées par leurs URLs. Les ressources URIs correspondent à leurs URLs actuelles bien que cela ne soit pas nécessaire. Chaque image dispose également d'une propriété, le titre de l'image. Un gabarit affichant cette information est très simple à créer. Contrairement aux exemples précédents où nous parcourions les propriétés pour naviguer dans le graphe, ici nous voulons parcourir les fils d'un conteneur RDF. Le conteneur, un Seq RDF, a l'URI <var>http://www.xulplanet.com/rdf/myphotos</var>. Il sera le point de départ de la navigation. Nous voulons que les points d'arrivées soient les trois images. Tout d'abord, nous définissons les attributs <code class="attribut">datasources</code> et <code class="attribut">ref</code> comme ceci&nbsp;:</p>

<pre><code>&lt;vbox datasources="template-guide-ex11.xul"
      ref="http://www.xulplanet.com/rdf/myphotos"&gt;</code></pre>

<p>Cette fois ci, nous utiliserons une nouvelle condition, la condition <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/member">member</a></code> en complément d'un triplet <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/triple">triple</a></code>.</p>

<pre><code>&lt;conditions&gt;
  &lt;content uri="?start"/&gt;
  &lt;member container="?start" child="?photo"/&gt;
  &lt;triple subject="?photo"
          predicate="http://purl.org/dc/elements/1.1/title"
          object="?title"/&gt;

  &lt;/conditions&gt;</code></pre>

<p>La graine est définie de manière similaire aux exemples précédents, par la création effective d'un premier résultat avec la variable ?start initialisée avec la ressource de référence <var>http://www.xulplanet.com/rdf/myphotos</var>. La même variable de départ est utilisée dans cet exemple, mais vous pouvez très bien utiliser une autre variable si vous le désirez.</p>

<pre><code>(?start = http://www.xulplanet.com/rdf/myphotos)</code></pre>

<p>La condition <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/member">member</a></code> est utilisée pour parcourir les fils d'un conteneur (ou le contraire). Premièrement, toutes les variables connues sont remplies à l'intérieur de la condition <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/member">member</a></code> pour le résultat courant. À ce stade, il n'y a qu'un seul résultat&nbsp;; l'attribut <code class="attribut">container</code> de l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/member">member</a></code> reçoit la valeur de la variable ?start de ce résultat. Cela donne le résultat suivant&nbsp;:</p>

<pre><code>&lt;member container="http://www.xulplanet.com/rdf/myphotos" child="?photo"/&gt;</code></pre>

<p>Comme en procédant avec un triplet, le constructeur va maintenant essayer de trouver autant de valeurs pour la variable ?photo que possible et créer les résultats potentiels en les utilisant. L'attribut <code class="attribut">container</code> spécifie le conteneur et l'attribut <code class="attribut">child</code> spécifie les fils. Dans la source de données RDF, le conteneur <var>http://www.xulplanet.com/rdf/myphotos</var> a trois fils, donc il y a trois valeurs possibles pour la variable ?photo. Si ce noeud n'avait pas de fils ou n'était pas un conteneur, il n'y aurait pas eu de résultats possibles. Le réseau d'information ressemble maintenant à ceci&nbsp;:</p>

<pre><code>(?start = http://www.xulplanet.com/rdf/myphotos,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/palace.jpg)
(?start = http://www.xulplanet.com/rdf/myphotos,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/canal.jpg)
(?start = http://www.xulplanet.com/rdf/myphotos,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/obselisk.jpg)</code></pre>

<p>Le <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/triple">triple</a></code> est ensuite évalué, et il sera examiné pour chaque résultat potentiel trouvé jusqu'ici. Le constructeur remplira tout d'abord autant de variables qu'il pourra. Pour le premier résultat, la valeur de la variable ?photo est connue, donc le triplet sera évalué comme ceci&nbsp;:</p>

<pre><code>&lt;triple subject="http://www.xulplanet.com/ndeakin/images/t/palace.jpg"
        predicate="http://purl.org/dc/elements/1.1/title"
        object="?title"/&gt;</code></pre>

<p>Le constructeur calcule ensuite la valeur de ?title en utilisant le prédicat <var>http://purl.org/dc/elements/1.1/title</var>. Dans le RDF, la ressource 'palace' a la valeur <var>Le palais vu de dessus</var> qui sera ajoutée au réseau d'information, assignée à la variable ?title. Notez que cette valeur est un littéral plutôt qu'une ressource.</p>

<pre><code>(?start = http://www.xulplanet.com/rdf/myphotos,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/palace.jpg)
 ?title = 'Le palais vu de dessus')</code></pre>

<p>Le processus continue de manière similaire pour les deux autres résultats. À la fin, le réseau contiendra les données suivantes&nbsp;:</p>

<pre><code>(?start = http://www.xulplanet.com/rdf/myphotos,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/palace.jpg)
 ?title = 'Le palais vu de dessus')
(?start = http://www.xulplanet.com/rdf/myphotos,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/canal.jpg)
 ?title = 'Canal')
(?start = http://www.xulplanet.com/rdf/myphotos,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/obelisk.jpg)
 ?title = 'Obelisque')</code></pre>

<p>Puisque le <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/triple">triple</a></code> est la dernière condition, les trois correspondances ont été trouvées. Le corps d'<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/action">action</a></code>, qui affiche l'image en utilisant son URL et son titre dans un libellé, devrait ressembler à ce qui suit. Vous noterez que l'attribut <code class="attribut">src</code> de l'image utilise la variable ?photo de <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/member">member</a></code>.</p>

<pre><code>&lt;action>
  &lt;vbox uri="?photo" align="start"&gt;
    &lt;image src="?photo"/&gt;
    &lt;label value="?title"/&gt;
  &lt;/vbox&gt;
&lt;/action&gt;</code></pre>

<p>Il ne devrait pas être trop difficile de dire ce qui va apparaître dans la fenêtre pour cet exemple. Si vous avez deviné, vous pouvez le vérifier en affichant <a href="exemples/template-guide-ex11.xul">cet exemple</a>.</p>
