
<p>Lors de la création de menus récursifs, vous devrez employer de multiples règles puisque les items feuilles devront être créés différemment des items branches. Les items feuilles devront utiliser un élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menuitem">menuitem</a></code> tandis que les items branches devront utiliser un élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menu">menu</a></code>. Deux règles sont nécessaires, bien que vous pourriez en ajouter d'autres si vous aviez d'autres différences à gérer.</p>

<pre><code>&lt;button label="Les maisons de mon quartier" type="menu"
        datasources="template-guide-streets.rdf"
        ref="http://www.xulplanet.com/rdf/myneighbourhood"
        xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&gt;
  &lt;template&gt;
    &lt;rule rdf:type="http://www.xulplanet.com/rdf/House"&gt;
      &lt;menupopup&gt;
        &lt;menuitem uri="rdf:*" label="rdf:http://www.xulplanet.com/rdf/address"/&gt;
      &lt;/menupopup&gt;

    &lt;/rule&gt;
    &lt;rule&gt;
      &lt;menupopup&gt;
        &lt;menu uri="rdf:*" label="rdf:http://purl.org/dc/elements/1.1/title"/&gt;
      &lt;/menupopup&gt;
    &lt;/rule&gt;

  &lt;/template&gt;
&lt;/button&gt;</code></pre>

<p>La première règle recherche toutes les maisons, alors que la seconde règle est utilisée pour les rues. Le contenu généré par chaque règle diffère seulement sur deux aspects. Tout d'abord, la balise du menu est différente (<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menuitem">menuitem</a></code> contre <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menu">menu</a></code>), et le libellé est donné par un autre prédicat. Lors de la première passe, la seconde règle trouve les rues, donc des éléments <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menupopup">menupopup</a></code> et <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menu">menu</a></code> sont créés. L'attribut <code class="attribut">uri</code> est placé sur l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menu">menu</a></code> car nous ne devons pas répéter le <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/popup">popup</a></code> pour chaque résultat. Après la première passe, le contenu sera équivalent à ce qui suit (en ignorant le contenu associé au gabarit)&nbsp;:</p>

<pre><code>&lt;button label="Les maisons de mon quartier" type="menu"&gt;
  &lt;menupopup&gt;
    &lt;menu uri="http://www.xulplanet.com/rdf/marion" label="rue Marion"/&gt;
    &lt;menu uri="http://www.xulplanet.com/rdf/garden" label="Avenue du Jardin"/&gt;
  &lt;/menupopup&gt;
&lt;/button&gt;</code></pre>

<p>La passe interne à travers les données gère les maisons. Les maisons correspondent à la première règle, donc un élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menupopup">menupopup</a></code> et <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menuitem">menuitem</a></code> sont générés et insérés à l'intérieur du contenu des rues (l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menu">menu</a></code>). Une nouvelle fois, le <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menupopup">menupopup</a></code> est créé une seule fois puisque l'attribut <code class="attribut">uri</code> est placé sur l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/menuitem">menuitem</a></code>. L'effet obtenu est un menu avec un sous menu. Il n'y a rien de spécial sur le fonctionnement des menus -- le constructeur procède de la même méthode pour n'importe quel type de contenu. Cependant, la nature des menus peut être difficile à appréhender. Voici le résultat de <a href="exemples/template-guide-ex26.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">l'exemple ci-dessus</a> avec que les deux niveaux aient été traités&nbsp;:</p>

<pre><code>&lt;button label="Les maisons de mon quartier" type="menu"&gt;
  &lt;menupopup&gt;
    &lt;menu uri="http://www.xulplanet.com/rdf/marion" label="rue Marion"&gt;
      &lt;menupopup&gt;
        &lt;menuitem uri="http://www.xulplanet.com/rdf/garden/16" label="16"/&gt;
        &lt;menuitem uri="http://www.xulplanet.com/rdf/garden/18" label="18"/&gt;

      &lt;/menupopup&gt;
    &lt;/menu&gt;
    &lt;menu uri="http://www.xulplanet.com/rdf/garden" label="Avenue du Jardin"&gt;
      &lt;menupopup&gt;
        &lt;menuitem uri="http://www.xulplanet.com/rdf/garden/25" label="25"/&gt;
        &lt;menuitem uri="http://www.xulplanet.com/rdf/garden/37" label="37"/&gt;

      &lt;/menupopup&gt;
    &lt;/menu&gt;
  &lt;/menupopup&gt;
&lt;/button&gt;</code></pre> 
