
<p>Les triplets peuvent être utilisés pour naviguer en remontant dans un graphe aussi bien qu'en le descendant, en suivant les flèches du graphe en sens inverse. Par exemple, dans <a href="images/template-guide-p2.png">l'exemple du début</a>, nous pourrions débuter au noeud D et remonter vers A et C. La syntaxe pour le triplet est la même excepté que la variable connue doit être placée dans l'attribut <code class="attribut">object</code> du triplet et la variable inconnue doit être placée dans l'attribut <code class="attribut">subject</code> du triplet.</p>

<pre><code>&lt;conditions&gt;

  &lt;content uri="?start"/&gt;
  &lt;triple subject="?relateditem"
          predicate="http://www.xulplanet.com/rdf/relatedItem"
          object="?start"/&gt;
&lt;/conditions&gt;</code></pre>

<p>Le triplet est évalué de la même manière sauf que la valeur de l'objet peut être remplie avec la valeur de la variable ?start. L'examen du graphe RDF s'effectue sur les flèches pointant vers un noeud et non quittant un noeud. Dans l'exemple des photos, nous voulons cataloguer chaque photo en plusieurs catégories. Une possibilité consiste à simplement ajouter un autre prédicat pour chaque photo avec une valeur littérale définie avec la catégorie. Ou alors, nous pouvons utiliser une ressource pour chaque catégorie. Cette seconde possibilité nous permet d'associer des propriétés supplémentaires à chaque catégories et de de rendre le graphe plus exploitable dans un gabarit. Dans ce cas, nous allons cataloguer chaque photo au pays où la photo a été prise en utilisant un prédicat de pays.</p>

<pre><code>&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
&lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:nso="http://www.daml.org/2001/09/countries/iso-3166-ont#"&gt;

  &lt;rdf:Seq rdf:about="http://www.xulplanet.com/rdf/myphotos"&gt;
    &lt;rdf:li rdf:resource="http://www.xulplanet.com/ndeakin/images/t/palace.jpg"/&gt;
    &lt;rdf:li rdf:resource="http://www.xulplanet.com/ndeakin/images/t/canal.jpg"/&gt;
    &lt;rdf:li rdf:resource="http://www.xulplanet.com/ndeakin/images/t/obelisk.jpg"/&gt;
  &lt;/rdf:Seq&gt;
  &lt;rdf:Description rdf:about="http://www.xulplanet.com/ndeakin/images/t/palace.jpg"
                   dc:title="Le palais vu de dessus"&gt;

    &lt;nso:Country resource="http://www.daml.org/2001/09/countries/iso#IT"/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about="http://www.xulplanet.com/ndeakin/images/t/canal.jpg"
                   dc:title="Canal"&gt;
    &lt;nso:Country resource="http://www.daml.org/2001/09/countries/iso#NL"/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about="http://www.xulplanet.com/ndeakin/images/t/obelisk.jpg"
                   dc:title="Obelisque"&gt;

    &lt;nso:Country resource="http://www.daml.org/2001/09/countries/iso#IT"/&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description about="http://www.daml.org/2001/09/countries/iso#IT"
                      dc:title="Italie"/&gt;
  &lt;rdf:Description about="http://www.daml.org/2001/09/countries/iso#NL"
                      dc:title="Pays bas"/&gt;
&lt;/rdf:RDF&gt;</code></pre>

<p>Un nouveau prédicat de pays a été ajouté à chaque photo sous la forme d'une autre ressource. Notez que ce prédicat utilise un nouvel espace de nommage qui doit être déclaré sur l'élément RDF racine. Maintenant que nous avons des pays pour chaque photos, au lieu de débuter sur le noeud <var>http://www.xulplanet.com/rdf/myphotos</var>, nous allons commencer par une ressource de pays et chercher toutes les photos pointant sur ce pays. L'attribut <code class="attribut">ref</code> est requis pour changer le point de départ sur la ressource de pays plutôt que sur le conteneur Seq des photos.</p>

<pre><code>&lt;hbox datasources="template-guide-ex2.rdf"
      ref="http://www.daml.org/2001/09/countries/iso#IT"&gt;</code></pre>

<p>Dans cet exemple, trois triplets seront utilisés.</p>

<pre><code>&lt;conditions&gt;
  &lt;content uri="?start"/&gt;
  &lt;triple subject="?start"
             predicate="http://purl.org/dc/elements/1.1/title"
             object="?countrytitle"/&gt;

  &lt;triple subject="?photo"
             predicate="http://www.daml.org/2001/09/countries/iso-3166-ont#Country"
             object="?start"/&gt;
  &lt;triple subject="?photo"
             predicate="http://purl.org/dc/elements/1.1/title"
             object="?title"/&gt;
&lt;/conditions&gt;</code></pre>

<p>Le premier triplet est utilisé pour obtenir le titre du pays. Il n'y a qu'un seul résultat potentiel à ce stade, le noeud de départ <var>http://www.daml.org/2001/09/countries/iso#IT</var>. Après l'examen du premier triplet, le réseau d'information ressemblera à ceci&nbsp;:</p>

<pre><code>(?start = http://www.daml.org/2001/09/countries/iso#IT,
 ?countrytitle = Italie)</code></pre>

<p>Un seul résultat est présent puisqu'il n'y a qu'un seul titre disponible. Le second triplet est le plus intéressant. Il sert à chercher en remontant les noeuds qui ont un prédicat de pays pointant sur eux. Il peut être difficile d'expliquer comment le constructeur recherche les arcs pointant d'un noeud vers un autre simplement en regardant l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/triple">triple</a></code>. Le constructeur de gabarits ne peut pas le résoudre tant que le triplet ne soit évalué et que la substitution de variables ne soit effectuée. Ici, la valeur de la variable ?start est déjà connue pour le résultat potentiel, donc elle sera remplie. Toutefois, la valeur de la variable ?photo n'est pas connue. Puisque l'objet est connu mais pas le sujet, le constructeur sait qu'il doit rechercher un prédicat pointant sur un noeud. Il y a deux photos dans la source de données RDF qui pointent vers le noeud <var>http://www.daml.org/2001/09/countries/iso#IT</var>, donc le résultat existant sera copié pour ces deux photos. Voici à quoi ressemble les données résultantes après le second triplet&nbsp;:</p>

<pre><code>(?start = http://www.daml.org/2001/09/countries/iso#IT,
 ?countrytitle = Italie,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/palace.jpg)
(?start = http://www.daml.org/2001/09/countries/iso#IT,
 ?countrytitle = Italie,
 ?photo = http://www.xulplanet.com/ndeakin/images/t/obselisk.jpg)</code></pre>

<p>Le troisième triplet ne fait que récupérer les titres des photos comme dans l'exemple précédent, en ajoutant une valeur pour la variable ?title de chaque photo. Nous pouvons alors afficher ces résultats en utilisant le corps d'<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/action">action</a></code> suivant&nbsp;:</p>

<pre><code>&lt;vbox uri="?photo" class="box-padded"&gt;
  &lt;image src="?photo"/&gt;
  &lt;label value="?title"/&gt;
  &lt;label value="Pays : ?countrytitle"/&gt;

&lt;/vbox&gt;</code></pre>

<p>Un libellé pour chaque pays sera affiché. Naturellement, il aura la même valeur pour chaque photo. Des espacements ont été ajoutés autour de chaque photo en utilisant la class <var>box-padded</var>. <a href="exemples/template-guide-ex15.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">Voir l'exemple</a>.</p>

<p><img src="images/template-guide-p15.png" alt="" class="screenshot" /></p>
