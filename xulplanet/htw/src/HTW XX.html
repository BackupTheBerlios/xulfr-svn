
<p>Les règles simplifiées utilisent également une méthode plus simple pour le traitement des conditions de filtre des résultats indésirables. Cette méthode vous permet de filtrer les résultats qui ont certains prédicats avec des valeurs spécifiques. Par exemple, vous pouvez filtrer les résultats d'une certaine catégorie ou pays. Vous ne pouvez filtrer que sur des prédicats pointant en dehors de la ressource membre. Ceci dit, vous ne pouvez pas filtrer sur des prédicats pointant vers une ressource membre, ou sur des prédicats pointant vers d'autres ressources.</p>

<p>Les conditions sont définies en utilisant des attributs sur l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/rule">rule</a></code>. L'espace de nommage de l'attribut et le nom de l'attribut sont combinés pour former le prédicat servant de filtre et la valeur de l'attribut sera la valeur du filtre à appliquer. Tous les résultats correspondant au critère sont acceptés et tous ceux qui n'y correspondent pas sont rejetés. Vous pouvez utiliser de multiples attributs pour filtrer sur plusieurs critères. Dans ce cas, les résultats seront acceptés s'ils correspondent à tous les critères.</p>

<p>Par exemple, pour filtrer les photos d'un pays spécifique&nbsp;:</p>

<pre><code>&lt;hbox id="photosList" datasources="template-guide-photos4.rdf"
      ref="http://www.xulplanet.com/rdf/myphotos"
      xmlns:r="http://www.xulplanet.com/rdf/"&gt;
  &lt;template&gt;
    &lt;rule r:country="http://www.daml.org/2001/09/countries/iso#IT"&gt;
      &lt;vbox class="box-padded" uri="rdf:*"&gt;
        &lt;image src="rdf:*"/&gt;

        &lt;label value="rdf:http://purl.org/dc/elements/1.1/title"/&gt;
      &lt;/vbox&gt;
    &lt;/rule&gt;
  &lt;/template&gt;
&lt;/hbox&gt;</code></pre>

<p>Cet <a href="exemples/template-guide-ex20.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">exemple</a> montre comment un unique attribut peut servir à filtrer seulement les résultats dont le pays 'country' est défini à <var>http://www.daml.org/2001/09/countries/iso#IT</var>. Le contenu des photos n'étant pas de ce pays ne sera pas généré. L'attribut a un espace de nommage qui, une fois substitué, devient <var>http://www.xulplanet.com/rdf/country</var>. Cette syntaxe n'est pas très différente de la façon dont les prédicats sont définis dans <a href="exemples/template-guide-photos4.rdf">le RDF/XML</a>.</p>

<p>L'emploi de cette forme de syntaxe d'attribut sur une règle est équivalente à un <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/triple">triple</a></code> dans la syntaxe étendue. En fait, le constructeur va convertir en interne l'attribut dans la même forme compilée qui serait utilisée par un <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/triple">triple</a></code>. Le triplet équivalent à l'exemple ci-dessus serait&nbsp;:</p>

<pre><code>&lt;triple subject="?photo"
        predicate="http://www.xulplanet.com/rdf/country"
        object="http://www.daml.org/2001/09/countries/iso#IT"/&gt;</code></pre>

<p>La syntaxe simplifiée de règles est limitée dans les possibilités de filtrage, toutefois elle est suffisante dans de nombreuses cas. Naturellement, si vous souhaitez réaliser un filtre dynamique, comme le réalise l'exemple des photos avec la liste déroulante, vous devrez modifier l'attribut sur l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/rule">rule</a></code> et reconstruire le gabarit.</p>

<pre><code>function applyFilter(country)
{
  var rule = document.getElementById("filterRule");
  if (country){
    rule.setAttributeNS("http://www.xulplanet.com/rdf/", "country", country);
  }
  else {
    rule.removeAttributeNS("http://www.xulplanet.com/rdf/", "country");
  }
  document.getElementById("photosList").builder.rebuild();
}</code></pre>

<p>Cette version de la fonction <code>applyFilter</code> ne fait que définir ou enlever l'attribut sur la règle selon les besoins. Notez l'emploi des fonctions dédiées aux espaces de nommage (avec le suffixe NS) pour définir ou enlever les attributs avec espaces de nommage. <a href="exemples/template-guide-ex20b.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">Cet exemple</a> suppose que l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/rule">rule</a></code> contient un identifiant <code class="attribut">id</code> <var>filterRule</var>. Notez que la liste déroulante elle même doit utiliser la syntaxe étendue puisqu'elle ne parcourt pas les fils d'une ressource.</p>

<p>Comme il a été mentionné plus tôt, vous pouvez filtrer selon plusieurs critères en utilisant de multiples attributs. Par exemple&nbsp;:</p>

<pre><code>&lt;rule id="filterRule"
      dc:title="Obelisk"
      r:country="http://www.daml.org/2001/09/countries/iso#IT"&gt;</code></pre>

<p>Les deux critères de filtre sur cette règle doivent être respectés. Les règles traitent tous les attributs comme des conditions à l'exception de l'attribut <code class="attribut">id</code> ainsi que d'autres attributs spéciaux qui sont ignorés. Ces attributs spéciaux sont utiles lors du traitement de règles multiples, ce qui sera le sujet d'une prochaine section.</p>
