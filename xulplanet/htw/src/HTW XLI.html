
<p>Avec l'utilisation d'un constructeur d'arbres, vous pouvez trier les résultats d'un arbre en colonne. Pour cela, placez un attribut <code class="attribut">sort</code> sur un élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treecol">treecol</a></code> faisant référence à la variable servant au tri de cette colonne.</p>

<pre><code>&lt;treecol id="name" label="Nom" sort="?name" flex="1"/&gt;
&lt;treecol id="date" label="Date" sort="?date" flex="1"/&gt;</code></pre>

<p>Dans cet exemple, la première colonne sera triée par la variable ?name et la seconde colonne par la variable ?date. Lorsque le tri est croissant, les lignes de l'arbre seront triées par ordre alphabétique. Lorsque le tri est décroissant, les lignes de l'arbre seront triées en sens inverse. Pour l'ordre naturel, les lignes seront triées selon l'ordre naturel de la source de données RDF. Une seule colonne effectue un tri à la fois. Si l'arbre est trié par nom, et que l'utilisateur clique sur l'en-tête de la colonne date, le tri sera modifié et appliqué sur la colonne date.</p>

<p>Il existe deux attributs supplémentaires utilisés pour le tri, et vous permettant de définir le sens du tri initial sur une colonne. Ces attributs sont modifiés quand l'utilisateur change le tri. L'attribut <code class="attribut">sortDirection</code> peut être utilisé pour spécifier le sens du tri initial d'une colonne. Une seule colonne doit avoir cet attribut, car un arbre ne peut être trié que sur une seule colonne à la fois. La valeur peut être soit <var>ascending</var>, <var>descending</var> ou <var>natural</var>. Cette dernière valeur est celle par défaut quand l'attribut n'est pas spécifié. L'attribut <code class="attribut">sortActive</code> peut être défini à <var>true</var> ou <var>false</var> et il spécifie sur quelle colonne de l'arbre s'applique le tri. Une seule colonne ne doit avoir cet attribut <code class="attribut">sortActive</code> défini à <var>true</var>. L'arbre modifiera ces deux attributs automatiquement si nécessaire lorsque les en-têtes de colonnes sont cliqués ou que l'arbre soit trié d'une autre manière.</p>

<p>Si vous ne voulez pas permettre un tri sur certaines colonnes, il vous suffit de ne pas ajouter d'attributs <code class="attribut">sort</code>. Précisez uniquement ces attributs sur les colonnes que vous permettez à l'utilisateur de trier.</p>

<p>Voici <a href="exemples/template-guide-ex41.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">un exemple complet</a> de tri sur un arbre.</p>

<p>L'attribut <code class="attribut">sort</code> doit être défini avec la variable qui contient les valeurs de tri. Habituellement, il s'agit de la même variable qui est utilisée pour générer les libellés des cellules de cette colonne, mais ce n'est pas une obligation. Dans l'exemple, la seconde colonne réalise un tri par date, mais si utilisiez une variable différente telle que ?description, et en supposant qu'un <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/binding">binding</a></code> la définisse, l'arbre pourrait être trié par les valeurs de la variable ?description pour chaque ligne. Dans la plupart des cas toutefois, vous utiliserez la même variable de tri que les valeurs des libellés. Il existe cependant une situation où l'affichage des libellés ne permet pas de générer un tri correct représentatif de leurs valeurs. Par exemple, la date du <var>15 Mai</var> va apparaître après le <var>15 Août</var> avec un tri purement alphabétique mais avant avec un tri chronologique.</p>

<p>Une autre méthode de tri par dates consiste à utiliser la construction avec <var>parseType="Date"</var> dans la source de données. Cette forme marque un littéral comme étant une valeur date plutôt qu'une chaîne de caractères. Le constructeur va le reconnaître et va alors réaliser un tri chronologique. L'avantage est que les dates seront affichées en fonction de la langue de l'utilisateur (ce qui signifie que la date est formatée correctement dans la langue de l'utilisateur). Voici un exemple comment spécifier cette forme dans la source de données RDF/XML&nbsp;:</p>

<pre><code>&lt;rdf:RDF xmlns="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:r="http://www.xulplanet.com/rdf/"
     xmlns:nc="http://home.netscape.com/NC-rdf#">
  &lt;rdf:Description rdf:about="http://www.xulplanet.com/ndeakin/images/t/palace.jpg"&gt;
    &lt;r:date nc:parseType="Date"&gt;1125966767295&lt;r:date&gt;
  &lt;/rdf:Description&gt;
&lt;/rdf:RDF&gt;</code></pre>

<p>Vous pouvez également spécifier <var>parseType="Integer"</var> pour les nombres afin de permettre un tri numérique. En combinant ces différents types pour différentes valeurs, vous pouvez ainsi trier alphabétiquement, numériquement ou par date.</p>

<p>Si vous utilisez la syntaxe de règles simplifiée, il n'y a pas de variables, donc vous devrez spécifier le prédicat en entier en incluant le préfixe <var>rdf:</var> dans l'attribut <code class="attribut">sort</code>. Par exemple&nbsp;:</p>

<pre><code>&lt;treecol id="name" label="Nom" sort="rdf:http://purl.org/dc/elements/1.1/title" flex="1"/&gt;</code></pre>

<p class="note">Notez que toute cette discussion autour du tri ne s'applique qu'aux constructeurs d'arbres.</p>

<p>Pour les autres éléments ou les arbres à contenu, un mécanisme de tri différent doit être employé et sera discuté par la suite.</p>
