
<p>Jusqu'à présent, la valeur d'une variable était utilisée pour remplacer la totalité d'un attribut dans le corps d'<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/action">action</a></code>. Toutefois, vous pouvez également ne remplacer qu'une partie de la valeur de l'attribut, ou utiliser plusieurs variables dans un seul attribut. Par exemple, pour inclure un préfixe avant une variable, vous pouvez utiliser&nbsp;:</p>

<pre><code>&lt;label value="Mon nom est ?name"/&gt;</code></pre>

<p>L'effet sera que la partie ?name de l'attribut sera remplacée par la valeur de la variable ?name. Par exemple, si la valeur de ?name est <var>Jake</var>, alors la valeur de l'attribut sera <var>Mon nom est Jake</var>. Vous pouvez inclure plusieurs variables si vous le désirez&nbsp;:</p>

<pre><code>&lt;label value="Mon nom est ?name et j'ai ?age ans"/&gt;</code></pre>

<p>Cette technique fonctionnera pour toutes les variables de remplacement dans le corps d'action à l'exception de l'attribut <code class="attribut">uri</code> qui n'aurait aucun sens.</p>

<p class="note">Notez que les noms de variables doivent être suivis d'un espace pour qu'ils puissent être déterminés comme des variables.</p>

<p>Ainsi, '?name?age' est considéré comme étant une seule variable portant ce nom, et non les deux variables escomptées. Pour utiliser deux variables, vous devez placer un espace entre elles. Mais il est parfois nécessaire de concaténer deux valeurs ensemble sans espace intermédiaire. Il vous suffit de mettre deux variables l'une à la suite de l'autre dans l'attribut en les séparant par un caractère <var>^</var>.</p>

<pre><code>&lt;label value="?name" class="?gender^?nationality"/&gt;</code></pre>

<p>Le signe ^ est considéré comme un séparateur entre les variables, il n'apparaîtra pas en sortie. Il peut aussi servir à séparer une variable et du texte normal&nbsp;:</p>

<pre><code>&lt;label value="?name" class="?gender^allemand"/&gt;</code></pre>

<p>Ces deux derniers exemples ont défini l'attribut <code class="attribut">class</code> du libellé. Ainsi, le libellé aura le style de classe soit <var>maleallemand</var> ou soit <var>femelleallemand</var>. Dans une feuille de styles, vous pouvez définir des propriétés pour chacune de ces classes de telle sorte que les valeurs différentes apparaîtront différemment sans avoir recours à des règles multiples.</p>

<p>Bien que moins classique, vous pouvez également insérer un point d'interrogation ou le signe ^ dans une valeur d'attribut. Pour cela, doublez simplement ces caractères. Par exemple&nbsp;:</p>

<pre><code>&lt;label value="Quel est mon nom?? Mon nom est ?name"/&gt;</code></pre>

<p>Dans cet exemple, le libellé devrait être <var>Quel est mon nom? Mon nom est Jake</var>.</p>

<p class="note">Notez que le signe ^ n'a une signification spéciale qu'à la fin d'une variable, ainsi il ne faut le doubler qu'après une variable.</p>

<p>Une dernière chose à préciser est que puisque les seuls caractères pouvant séparer une variable sont le signe ^, un espace ou la fin d'un attribut, cela signifie que n'importe quel autre caractère est valide dans le nom d'une variable. Cependant, pour une meilleure lisibilité, vous devriez vous restreindre à l'emploi de noms de variables contenant des lettres, des nombres et peut-être des traits d'union pour séparer les mots.</p>

<p>La description ajoutée dans <a href="exemples/template-guide-ex12b.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">l'exemple précédent</a> peut être un long texte pour certaines photos. Il peut être préférable que le texte puisse être tronqué en le plaçant dans un élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/description">description</a></code>. Cela signifie que nous devons faire un remplacement de variable en texte, et non en tant que valeur d'attribut. La balise <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/textnode">textnode</a></code> est employée dans ce cas. Elle dispose d'un seul attribut, l'attribut <code class="attribut">value</code> qui opère une substitution de variables comme les autres attributs. Toutefois, l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/textnode">textnode</a></code> n'est pas copié dans le contenu généré mais un noeud DOM texte est créé à la place avec la valeur de l'attribut <code class="attribut">value</code> et son contenu. Par exemple, si le gabarit contient&nbsp;:</p>

<pre><code>&lt;description&gt;&lt;textnode value="?description"/&gt;&lt;/description&gt;</code></pre>

<p>Le contenu qui sera généré serait&nbsp;:</p>

<pre><code>&lt;description&gt;Prise de vue à partir du sommet de la tour en regardant vers l'Est du palais des Doges&lt;/description&gt;</code></pre>

<p>Vous noterez que <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/textnode">textnode</a></code> a été remplacé par la valeur substituée de son attribut. Malheureusement, cette substitution peut ne pas fonctionner à chaque fois à cause d'un bogue. Souvenez vous que le constructeur de gabarits ne charge pas la source de données avant de traiter un gabarit. Les règles sont examinée au fur et à mesure que les nouvelles données sont chargées. Donc lors du chargement, des données peuvent correspondre aux règles. Toutefois, les variables déterminées à partir d'une liaison <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/binding">binding</a></code> sont évaluées en utilisant un process beaucoup plus simple. Le bogue est que le code pour les liaisons ne traite pas correctement l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/textnode">textnode</a></code>. Ainsi, si vous utilisez une variable définie dans une liaison <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/binding">binding</a></code>, vous devez vous assurer que la source de données soit chargée avant que le gabarit ne soit construit, ou bien vous reconstruisez simplement le gabarit. Une autre possibilité consiste à réarranger le RDF de telle sorte que les valeurs, dans cet exemple les descriptions, soient spécifiées avant les conteneurs. Tout ceci peut vous paraître confus, mais espérons que ce bogue, si vous le rencontrez, soit corrigé bientôt.</p>
