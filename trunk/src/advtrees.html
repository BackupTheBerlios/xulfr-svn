
   <p>Nous allons voir ici des caractéristiques supplémentaires sur les arbres.</p>
   <h2>Arbres hiérarchiques</h2>
<p>
L'élement <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/tree">tree</a></code> est aussi
utilisé pour créer des listes hiérarchiques, comme on en trouve dans
un gestionnaire de fichier ou dans les listes de marque-pages d'un navigateur. La vue arborescente
a un nombre de fonctions qui spécifient la hiérarchie des éléments dans un arbre. Chaque élément dans
l'arbre possède un niveau commençant à 0. Les éléments les plus élevés dans l'arbre auront
un niveau à 0, Les fils de ces éléments auront un niveau à 1, les fils
en dessous auront un niveau à 2, et ainsi de suite. L'arbre demandera l'affichage pour
le niveau de chaque élément afin de déterminer comment dessinner les rangées.
</p>


<p>
L'arbre dessinera les flèches d'ouverture et de fermeture pour ouvrir et fermer un élément parent
ainsi que les lignes reliant les fils à leurs parents. L'arbre se chargera aussi
de dessiner les rangées avec le niveau correct d'indentation. Cependant, la vue
devra s'assurer qu'elle maintient le niveau de rangées nécéssaire.
Ceci peut parfois être un peu délicat, mais heureusement, le module de la vue  intégré du contenu
fait tout le travail difficile pour nous.
</p>

<p>
Pour créer un ensemble de rangées nichées, tout ce que nous devons faire est d'ajouter un second
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treechildren">treechildren</a></code>
élement à l'intérieur du parent
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treeitem">treeitem</a></code>.
Vous pouvez ensuite ajouter des éléments à l'intérieur
pour spécifier les rangées fils d'un élément. Ne mettez pas l'élément interne
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treechildren">treechildren</a></code>
à l'intérieur de
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treerow">treerow</a></code> car
ceci ne marchera pas.
</p>

<p>
Vous pouvez répéter ce processus pour créer les arbres profondément nichés. Essentiellement,
un élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treeitem">treeitem</a></code>
peut contenir l'une ou l'autre
rangées simples qui sont déclarées avec l'élément
<code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treerow">treerow</a></code>
ou un ensemble de rangées qui sont déclarées avec l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treechildren">treechildren</a></code>
</p>

<p>
Il y a deux autres choses que vous devez faire pour vous assurer que la hiérarchie fonctionne correctement.
Premièrement, vous devz marquer l'élément <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/treeitem">treeitem</a></code> qui possède
des fils comme conteneur. Vous effectuez ceci en lui ajoutant l'attribut
 <code class="attribut">container</code> comme ci-dessous&nbsp;:
</p>

   <pre><code>
      &lt;treeitem container="true"/&gt;
   </code></pre>
   <p>Cela permet à l'utilisateur de double-cliquer sur le <code class="tag">treeitem</code> pour
   déplier ou replier les lignes intérieures. Vous pouvez avoir les lignes enfants affichées
   initialement en ajoutant l'attribut <code class="attribut">open</code>. Quand l'utilisateur
   déplie ou plie le parent, la fonction <code>toggleOpenState</code> de la vue est appelée
   pour basculer l'item entre ouvert et fermé. Pour une vue d'arbre de type contenu, il sera
   ajouté un attribut <code class="attribut">open</code> pour refleter l'état courant.</p>


   <p>Le second changement est que vous devez mettre l'attribut <code class="attribut">primary</code>
   sur la première colonne. Cela fait apparaitre un petit triangle ou un signe plus avant les cellules
   dans cette colonne pour indiquer que les cellules qui peuvent être dépliées. De plus, les lignes
   filles sont indentées. Notez aussi que l'utilisateur ne peut pas cacher cette colonne
   via le petit menu déroulant à droite des colonnes.</p>


   <p>Voici un exemple simple.</p>

   <p>Exemple 8.2.1&nbsp;: <a href="exemples/ex_advtrees_1.xul.txt">Source</a>
      <a href="exemples/ex_advtrees_1.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">Voir</a></p>
   <pre><code>&lt;tree rows="6"&gt;
  &lt;treecols&gt;
      &lt;treecol id="firstname" label="Prénoms" primary="true" flex="3"/&gt;
      &lt;treecol id="lastname" label="Noms" flex="7"/&gt;
  &lt;/treecols&gt;

  &lt;treechildren&gt;
    &lt;treeitem container="true" open="true"&gt;
      &lt;treerow&gt;
        &lt;treecell label="Personnes"/&gt;
      &lt;/treerow&gt;

      &lt;treechildren&gt;
        &lt;treeitem&gt;
          &lt;treerow&gt;
            &lt;treecell label="Bob"/&gt;
            &lt;treecell label="Carpenter"/&gt;
          &lt;/treerow&gt;

        &lt;/treeitem&gt;
        &lt;treeitem&gt;
          &lt;treerow&gt;
            &lt;treecell label="Jerry"/&gt;
            &lt;treecell label="Hodge"/&gt;
          &lt;/treerow&gt;

        &lt;/treeitem&gt;
      &lt;/treechildren&gt;
    &lt;/treeitem&gt;
  &lt;/treechildren&gt;
&lt;/tree&gt;</code></pre>

   <p><img src="images/advtrees1.png" class="screenshot-right" alt="" />Cela a crée un arbre
   hiérarchique. Comme ce que l'on peut voir sur l'image, un petit signe plus ou moins est
   apparu sur la première ligne, indiquant qu'elle contient des lignes filles. En double-cliquant
   sur la ligne, l'utilisateur peut ouvrir ou fermer la liste. Les lignes filles sont indentées.
   Notez comment la ligne "personnes" n'a besoin que d'une colonne.</p>

   <p>L'élément <code class="tag">treeitem</code> du dessus contient une seul élément
   <code class="tag">treerow</code> et un élément <code class="tag">treechildren</code>.
   Le premier crée la donnée pour la ligne parente et le deuxième contient les items fils.</p>

   <p>Vous pouvez emboîter les lignes autant que nécessaire. Souvenez-vous que vous devez
   utiliser l'attribut <code class="attribut">container</code> sur les lignes qui ont
   des lignes filles. La simple présence de lignes filles n'est pas suffisante pour
   l'indiquer, comme vous pouvez avoir un conteneur qui n'a pas d'enfant mais
   qui devrait être traité comme un conteneur. Par exemple, un répertoire sans fichier devrait
   être traité comme un conteneur alors qu'un fichier ne le devrait pas.</p>

   <h2>Plus sur les colonnes d'arbres</h2>

   <p>Un attribut supplémentaire que vous pouvez ajouter à l'arbre est
      <code class="attribut">enableColumnDrag</code>. Si il est mis à <var>true</var>, l'utilisateur peut
      alors déplacer les en-têtes de colonne afin de réarranger l'ordre des colonnes.</p>

   <p>Un utilisateur voudra également changer la taille des colonnes. Vous pouvez faire cela en plaçant
   un élement <code class="tag"><a href="http://xulfr.org/wiki/Reference/Xul/splitter">splitter</a></code>
   entre chaque élement <code class="tag">treecol</code>. Une petite encoche apparaitra entre chaque en-tête de colonne
    que l'utilisateur pourra déplacer pour changer la taille d'une colonne.
    Vous pouvez utiliser la classe de style <code>tree-splitter</code> pour cacher l'encoche bien que la colonne
    pourra être retaillée.</p>

   <p>Vous pouvez définir une taille minimum ou maximum à la colonne, en utilisant les attributs
   <code>minwidth</code> et <code>maxwidth</code> sur les en-têtes de colonnes.</p>

   <p>Vous pouvez mettre l'attribut <code class="attribut">hidden</code> à <var>true</var> pour avoir une colonne
   cachée par défaut. L'utilisateur peut choisir d'afficher la colonne en la sélectionnant dans la liste
   déroulante à la fin de la ligne des en-têtes de colonne.</p>

   <p>Comme avec tous les éléments, l'attribut <code class="attribut">persist</code> peut être utilisé pour sauver
   l'état des colonnes entre chaque session. Ainsi, la façon dont l'utilisateur aura choisi l'affichage des colonnes,
   sera automatiquement sauvegardé pour la prochaine fois. Vous aurez besoin de sauver un certain nombre d'attributs comme
   indiqué dans l'exemple ci-dessous&nbsp;:</p>

   <p>Exemple 8.2.2&nbsp;: <a href="exemples/ex_advtrees_2.xul.txt">Source</a>
      <a href="exemples/ex_advtrees_2.xul" onclick="window.open(this.href,'xulex','chrome,resizable'); return false;">Voir</a></p>

   <pre><code>&lt;tree enableColumnDrag="true" flex="1"&gt;

  &lt;treecols&gt;
    &lt;treecol id="runner" label="Coureur" flex="2" persist="width ordinal hidden"/&gt;
    &lt;splitter class="tree-splitter"/&gt;
    &lt;treecol id="city" label="Ville" flex="2" persist="width ordinal hidden"/&gt;
    &lt;splitter class="tree-splitter"/&gt;
    &lt;treecol id="starttime" label="Heure de départ" flex="1" persist="width ordinal hidden"/&gt;

    &lt;splitter class="tree-splitter"/&gt;
    &lt;treecol id="endtime" label="Heure d'arrivé" flex="1" persist="width ordinal hidden"/&gt;
  &lt;/treecols&gt;

  &lt;treechildren&gt;
    &lt;treeitem&gt;
      &lt;treerow&gt;

        &lt;treecell label="Joshua Granville"/&gt;
        &lt;treecell label="Vancouver"/&gt;
        &lt;treecell label="7:06:00"/&gt;
        &lt;treecell label="9:10:26"/&gt;
      &lt;/treerow&gt;
    &lt;/treeitem&gt;

    &lt;treeitem&gt;
      &lt;treerow&gt;
        &lt;treecell label="Robert Valhalla"/&gt;
        &lt;treecell label="Seattle"/&gt;
        &lt;treecell label="7:08:00"/&gt;
        &lt;treecell label="9:15:51"/&gt;

      &lt;/treerow&gt;
    &lt;/treeitem&gt;
  &lt;/treechildren&gt;
&lt;/tree&gt;
   </code></pre>

   <p>Trois attributs des colonnes doivent être persistants, l'attribut <code class="attribut">width</code>
   pour sauver les tailles de colonnes, l'attribut <code class="attribut">ordinal</code> qui contient la
   position de la colonne, et l'attribut <code class="attribut">hidden</code> qui indique si la colonne
   est visible ou invisible.</p>
   <hr />

   <p>Dans la prochaine section, nous allons voir comment récupérer ou spécifier une sélection sur un arbre.</p>
